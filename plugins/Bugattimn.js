































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































import {
    promises,
    readFileSync
   } from "fs"
   import {
    join
   } from "path"
   import {
    xpRange
   } from "../lib/levelling.js"
   import moment from "moment-timezone"
   import os from "os"

  
   let groupmenu = `
     **  
   . <@/>  
   .
   .Ss <x>
   .s <x>
   .
   .
   . @s
   . (@)
   .
   .
   . <923xxx>
   . @s
   .
   . s||
   .
   .
   .s
   .s <x>
   . */s*
   .s <x>
   .s <> @s
   .s
   .
   .
   . @s
   .s
   .
  `
  
  let ownermenu = `
    *Marisel*  
   . <@>
   . @s
   . <@>
   .HEROKU
   . @s
   .
   .x
   .s <x>
   . <x>
   .
   .x
   . @s
   . @s
   .s
   . < >
   . < >
   . <.s.> <s>
   .s <54xxx>
   .sx
   .s
   ..sx
   ..sx [s]
   . @s
   .
   .
   .
   .s
   . <>
  `
  
  let funmenu = `
    **  
   . <s>
   .3
   .
   .
   . @
   .
   .
   . @s
   .
   .s
   .s
   .s
   .
   .
   .s @s
   .
   .
   .
  `
  
  let reactmenu = `
    **  
   . @
   . @
   . @
   . @
   . @
   .ss @
   . @
   . @
   .s @
   . @
   . @
   .s @
   .s @
   . @
   . @
   . @
   . @
   . @
   . @
   .s @
   . @
   . @
   . @
   . @
   . @
   . @
  `
  
  let dlmenu = `
    ** 
   . <>
   . <>
   . <>
   .s
   .s
   . <>
   .
   .
   . <>
   . <x>
   . <x>
   . <>
   .s
   . <>
   . <>
   . <>
   . <>
   .3 <>
   .s <>
   .4 <->
   . <>
  `
  
  let gamemenu = `
    **  
   .s <>
   .ss [ ]
   .ss 
   .ss 
   .ss s
   .
   .ss
   .Ms <s>
   . <//ssss>
   . < >
  `

  let logomenu = `
    **  
   .
   .2
   .
   .s
   .x1
   .x2
   .x3
   .x4
   .x5
   .x6
   .x7
   .x8
   .x9
   .x10
   .x11
   .x12
   .s
   .sss
   .ss
   .s
   . <>
   .
   . <>
  `
  
  let stickermenu = `
    *s*  
   .x <+>
   .s
   .s
   .s (| )
   .s <>
   .s(| )
   .s
   . <s>
   .
   . <@s>
   .
   .2
   .3
   .4
   .5
   .
   .2
   .3
   . <>|<>
  `
  
  let audiomenu = `
    **  
   .ss []
   . []
   . []
   . []
   .s []
   . []
   . []
   .s []
   . []
   .s []
   .s []
   . []
  `
  
  
  let newsmenu = `
    *s*  
   .s
   .s
   .
  
  `
  
  let toolsmenu = `
    *s*  
   .
   . <x>
   . <x>
   .s <> <x>
   . *<>*
   .
   .
   .
   . <>
   . <>
   .s <>
   .
   .s
   . <>
   . <>
   . <>
   .
   .
   .s
   .s
   .
   .s
   .s
   . <x1>|<x2>
   .
   .
   .ss <>
   .ss <>
   .s
   .s  
   .
   .s <> <x>
   .
   .s <> <s>
   .
   .
  `
  
  let Aimenu = `
    *AI*  
  .
  .
  .
  .
  .
  .
  .
  .x
  .2
  
  `
  let religionmenu = `
    **  
   .   
   . [s_|s_]
  `

  let studymenu = ` *s* 
 .
 .s 36  
 .
 .2    
 .  
 . 
 .  
 .s 
 .
 .
`
  
  let botmenu = `
    *B M*  
   .
   .
   .s
   .s
   .s
   .
   .
   .
   .
   .s
   .s
   .7
   . 
   .
   .s
   .s
  
  `
  let pluginmenu = `
    **  
   .s
   .s <Gs URL>
  
  `

  const handler = async (m, {
    conn,
    command,
    text,
    args,
    usedPrefix
  }) => {
    
  
   let glb = global.db.data.users
   let usrs = glb[m.sender]
   let tag = `@${m.sender.split("@")[0]}`
   let mode = global.opts["self"] ? "Private" : "Public"
   
   let {
  age,
  exp,
  limit,
  level,
  role,
  registered,
  credit
   } = glb[m.sender]
   let {
  min,
  xp,
  max
   } = xpRange(level, global.multiplier)
   let name = await conn.getName(m.sender)
   let premium = glb[m.sender].premiumTime
   let prems = `${premium > 0 ? "Premium": "Free"}`
   let platform = os.platform()
  
  
   let ucpn = `${ucapan()}`
  
   let _uptime = process.uptime() * 1000
   let _muptime
   if (process.send) {
  process.send("uptime")
  _muptime = await new Promise(resolve => {
  process.once("message", resolve)
  setTimeout(resolve, 1000)
  }) * 1000
   }
   let muptime = clockString(_muptime)
   let uptime = clockString(_uptime)
  
   
   let totalfeatures = Object.values(global.plugins).filter((v) => v.help && v.tags).length;
   let totalreg = Object.keys(glb).length
  
    conn.gurumenu = conn.gurumenu ? conn.gurumenu : {};
    
   
    global.fcontact = { key: { fromMe: false, participant: `0@s.whatsapp.net`, remoteJid: 'status@broadcast' }, message: { contactMessage: { displayName: `${name}`, vcard: `BEGIN:VCARD\nVERSION:3.0\nN:;a,;;;\nFN:${name}\nitem1.TEL;waid=${m.sender.split('@')[0]}:${m.sender.split('@')[0]}\nitem1.X-ABLabel:Ponsel\nEND:VCARD`}}}
    const infoText = ` 
   s
   -  *1.*  
   -  *2.*  
   -  *3.*  
   -  *4.*  
   -  *5.*  
   -  *6.*  
   -  *7.*  
   -  *8.*  
   -  *9.* s 
   -  *10.*  
   -  *11.* s 
   -  *12.* s 
   -  *13.* s 
   -  *14.*  
   -  *15.*  
   -  *16.*  
  `
;

  
  const { result, key, timeout } = await conn.sendMessage(m.chat, { video: { url: menuvid }, caption: infoText.trim(),  gifPlayback: true,
  gifAttribution: 0}, { quoted: m})
  
  // Save the menu options to gurumenu
  conn.gurumenu[m.sender] = {
    result,
    key,
    timeout: setTimeout(() => {
      conn.sendMessage(m.chat, {
          delete: key
      });
      delete conn.gurumenu[m.sender];
  }, 180 * 1000),
  };
  };
  
 
  handler.before = async (m, { conn }) => {
    conn.gurumenu = conn.gurumenu ? conn.gurumenu : {};
    if (m.isBaileys || !(m.sender in conn.gurumenu)) return;
    const { result, key, timeout } = conn.gurumenu[m.sender];
    if (!m.quoted || m.quoted.id !== key.id || !m.text) return;
    const choice = m.text.trim();
    
    if (choice === "1") {
        await conn.sendMessage(m.chat, { image: { url: 'https://files.catbox.moe/w5vpcm.jpg' },
        caption: botmenu
      }, { quoted: m});
      } else if (choice === "2") {
        await conn.sendMessage(m.chat, { image: { url: 'https://files.catbox.moe/w5vpcm.jpg' },
        caption: ownermenu
      }, { quoted: m});
      } else if (choice === "3") {
        await conn.sendMessage(m.chat, { image: { url: 'https://files.catbox.moe/w5vpcm.jpg' },
        caption: groupmenu
      }, { quoted: m});
      } else if (choice === "4") {
        await conn.sendMessage(m.chat, { image: { url: 'https://files.catbox.moe/w5vpcm.jpg' },
        caption: funmenu
      }, { quoted: m});
      } else if (choice === "5") {
        await conn.sendMessage(m.chat, { image: { url: 'https://files.catbox.moe/w5vpcm.jpg' },
        caption: reactmenu
      }, { quoted: m});
      } else if (choice === "6") {
        await conn.sendMessage(m.chat, { image: { url: 'https://files.catbox.moe/w5vpcm.jpg' },
        caption: dlmenu
      }, { quoted: m});
      } else if (choice === "7") {
        await conn.sendMessage(m.chat, { image: { url: 'https://files.catbox.moe/w5vpcm.jpg' },
        caption: groupmenu
      }, { quoted: m});
      } else if (choice === "8") {
        await conn.sendMessage(m.chat, { image: { url: 'https://files.catbox.moe/w5vpcm.jpg' },
        caption: logomenu
      }, { quoted: m});
      } else if (choice === "9") {
        await conn.sendMessage(m.chat, { image: { url: 'https://files.catbox.moe/w5vpcm.jpg' },
        caption: stickermenu
      }, { quoted: m});
      } else if (choice === "10") {
        await conn.sendMessage(m.chat, { image: { url: 'https://files.catbox.moe/w5vpcm.jpg' },
        caption: audiomenu
      }, { quoted: m});
      } else if (choice === "11") {
        await conn.sendMessage(m.chat, { image: { url: 'https://files.catbox.moe/w5vpcm.jpg' },
        caption: newsmenu
      }, { quoted: m});
      } else if (choice === "12") {
        await conn.sendMessage(m.chat, { image: { url: 'https://files.catbox.moe/w5vpcm.jpg' },
        caption: studymenu
      }, { quoted: m});
      } else if (choice === "13") {
        await conn.sendMessage(m.chat, { image: { url: 'https://files.catbox.moe/w5vpcm.jpg' },
        caption: toolsmenu
      }, { quoted: m});
      } else if (choice === "14") {
        await conn.sendMessage(m.chat, { image: { url: 'https://files.catbox.moe/w5vpcm.jpg' },
        caption: Aimenu
      }, { quoted: m});
      } else if (choice === "15") {
        await conn.sendMessage(m.chat, { image: { url: 'https://files.catbox.moe/w5vpcm.jpg' },
        caption: religionmenu
      }, { quoted: m});
      } else if (choice === "16") {
        await conn.sendMessage(m.chat, { image: { url: 'https://files.catbox.moe/w5vpcm.jpg' },
        caption: pluginmenu
      }, { quoted: m});
      } else {
        m.reply('I . Ps     .');
      }
  
  };
  
  
  handler.help = ["play"];
  handler.tags = ["main"];
  handler.command = /^(menu3)$/i;
  handler.limit = false;
  export default handler;
  
  
  
  
  function pickRandom(list) {
    return list[Math.floor(Math.random() * list.length)]
   }
   
   const more = String.fromCharCode(8206)
   const readMore = more.repeat(4001)
   
   function clockString(ms) {
    let h = isNaN(ms) ? "--" : Math.floor(ms / 3600000)
    let m = isNaN(ms) ? "--" : Math.floor(ms / 60000) % 60
    let s = isNaN(ms) ? "--" : Math.floor(ms / 1000) % 60
    return [h, " H ", m, " M ", s, " S "].map(v => v.toString().padStart(2, 0)).join("")
   }
   
   function clockStringP(ms) {
    let ye = isNaN(ms) ? "--" : Math.floor(ms / 31104000000) % 10
    let mo = isNaN(ms) ? "--" : Math.floor(ms / 2592000000) % 12
    let d = isNaN(ms) ? "--" : Math.floor(ms / 86400000) % 30
    let h = isNaN(ms) ? "--" : Math.floor(ms / 3600000) % 24
    let m = isNaN(ms) ? "--" : Math.floor(ms / 60000) % 60
    let s = isNaN(ms) ? "--" : Math.floor(ms / 1000) % 60
    return [ye, " *Years *\n", mo, " *Month *\n", d, " *Days *\n", h, " *Hours *\n", m, " *Minute *\n", s, " *Second *"].map(v => v.toString().padStart(2, 0)).join("")
   }
   
   function ucapan() {
    const time = moment.tz("Africa/Kenya").format("HH")
    let res = "Good morning "
    if (time >= 4) {
     res = "Good Morning "
    }
    if (time >= 10) {
     res = "Good Afternoon "
    }
    if (time >= 15) {
     res = "Good Afternoon "
    }
    if (time >= 18) {
     res = "Good Night "
    }
    return res
   }

